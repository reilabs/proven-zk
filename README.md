# `proven-zk` library

`Lean` support library to analyse circuits generated by `reilabs/gnark-lean-extractor`.

## How to use

Simply add the library to your `lakefile.lean` as follows

```
require ProvenZK from git
  "https://github.com/reilabs/proven-zk.git"
``` 

## Components

There are different components useful for formal verification of circuits.

The basic ones are:
```
import ProvenZk.Gates
import ProvenZk.Ext.Vector
```

These are used to represent gates and vectors.

Gates are implemented in modular arithmetic through datatype `ZMod`. The operations available are:
- [x] `is_bool` -> checks if input is either 0 or 1
- [x] `add` -> returns sum of two integers
- [x] `mul_acc` -> multiply and accumulate operation
- [x] `neg` -> returns negative number
- [x] `sub` -> returns the difference between two integers
- [x] `mul` -> returns the product between two integers
- [x] `div_unchecked` -> returns the division between two integers
- [x] `div` -> returns the division between two integers
- [x] `inv` -> returns inverse of an integer
- [x] `xor` -> returns A XOR B
- [x] `or` -> returns A OR B
- [x] `and` -> returns A AND B
- [x] `select` -> if b then i1 else i2
- [x] `lookup` -> 4-way multiplexer
- [x] `cmp` -> compares two integers a and b. 0 if equal, -1 if a < b, 1 if a > b
- [x] `is_zero` -> checks if input is 0
- [x] `eq` -> checks if two integers are equal
- [x] `ne` -> checks if two integers are not equal
- [x] `le` -> checks if a <= b
- [x] `to_binary` -> converts integer to vector of bits of length n with LSB at index 0.
- [x] `from_binary` -> converts vector of bits to integers

Vector files contain multiple theorems for formal verification.

`import ProvenZk.Binary` contains the definition of Bits with various theorems to help working with `to_binary` and `from_binary`.

`import ProvenZk.Binary` contains the definition of perfect hash to be used for formal verification purposes.

`import ProvenZk.Merkle` contains the definition of Merkle Tree and various theorems to help formal verification of circuits.

Other help functions are contained in
```
import ProvenZk.Ext.Range
import ProvenZk.Ext.Matrix
import ProvenZk.Ext.List
```